<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head>
    <meta charset="UTF-8"/>
    <title>Travel Diary</title>
    <link rel ="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>
    <script th:src="@{/theme.js}"></script>
    <link rel="stylesheet" th:href="@{styles.css}"/>
</head>
<body>
<header th:replace="~{fragments :: header}"></header>
<!--    <div class="nav">-->
<!--        <a class="tripsLink" href="/trips"> Trips</a>-->
<!--    </div>-->

<!--<div id="add">-->
<!--    <a class="addTrip" href="/trips/add">Add a trips</a> <br>-->
<!--&lt;!&ndash;    <a class="deleteTrip" href="/trips/delete">Delete a trips</a> <br>&ndash;&gt;-->
<!--    <a class="addTag" href="/trips/add-tag">Add tags</a> <br>-->

    <button onclick="changeTheme()">Change Theme</button>


    <main>
<!--        <p th:unless="${tripList != null and tripList.size() > 0}">-->
<!--        <em>There are no trips at this time. Add a trips!</em>-->
        <!-- adding a {tripId} to the action and the controller mapping path makes it "No static resources in trips/favorite" -->
<!-- without it tho, it has the error of bad JPA transaction -->
        <!--        </p>-->
        <th:block th:if="${tripList} and ${tripList.size()}">
            <form action='/trips/favorite' method="post">
                <table class ="table table-striped">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Trip</th>
                        <th>City</th>
                        <th>State</th>
                        <th>Favorite</th>
                        <th>Tags</th>
                    </tr>
                    </thead>
                    <tr th:each="trip: ${tripList}">
                        <td th:text="${trip.getId}"></td>
                        <td th:text="${trip.getName}"></td>
                        <td th:text="${trip.getCity}"></td>
                        <td th:text="${trip.getState}"></td>
                        <td>
                            <input type="checkbox" name="tripId" th:value="${trip.getId}" th:checked="${trip.isFavorite}"/>
                        </td>

                        <td> <p th:each="tag : ${trip.getTags}"
                            th:text="${tag.displayName}"></p></td>

                        <td>
                        <a th:href="@{'/trips/add-tag/'+${trip.getId}}">Add Tag</a>
                        </td>

<!--                            <span th:each="tag : ${tags}" th:text="${tag.displayName} + ' '"></span>-->

<!--                        <td th:text="${trips.tags}"></td>-->
<!--                        <label for="tags">Tags</label><br>-->
<!--                        <input type="text" id="fname" name="fname"><br>-->
<!--th:text="${tag.displayName}"></td>-->


                    </tr>
                </table>
                <button type='submit'>Update Favorites</button>
<!--                <button type='submit'>Create Tags</button>-->
<!--                <a th:ref = "/trips/add-tag">Add Tag</a>-->
<!--                <a th:href="'/trips/add-tag?tripId=' + ${trips.id}">Add Tag</a>-->
<!--                <a th:href="@{/trips/edit/{id}(id=${trips.id})}">Edit</a>-->
            </form>
        </th:block>
    </main>
</div>
</body>
</html>